<!-- Title: agentscope._logging - AgentScope -->
<!-- URL: https://doc.agentscope.io/zh_CN/_modules/agentscope/_logging.html -->

          <h1>agentscope._logging 源代码</h1><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">"""The logger for agentscope."""</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>


<span class="n">_DEFAULT_FORMAT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">"</span><span class="si">%(asctime)s</span><span class="s2"> | </span><span class="si">%(levelname)-7s</span><span class="s2"> | "</span>
    <span class="s2">"</span><span class="si">%(module)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(lineno)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">"</span>
<span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">"as"</span><span class="p">)</span>


<div class="viewcode-block" id="setup_logger">
<a class="viewcode-back" href="../../api/agentscope.html#agentscope.setup_logger">[文档]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">setup_logger</span><span class="p">(</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Set up the agentscope logger.</span>

<span class="sd">    Args:</span>
<span class="sd">        level (`str`):</span>
<span class="sd">            The logging level, chosen from "INFO", "DEBUG", "WARNING",</span>
<span class="sd">            "ERROR", "CRITICAL".</span>
<span class="sd">        filepath (`str | None`, optional):</span>
<span class="sd">            The filepath to save the logging output.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"INFO"</span><span class="p">,</span> <span class="s2">"DEBUG"</span><span class="p">,</span> <span class="s2">"WARNING"</span><span class="p">,</span> <span class="s2">"ERROR"</span><span class="p">,</span> <span class="s2">"CRITICAL"</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Invalid logging level: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">. Must be one of "</span>
            <span class="sa">f</span><span class="s2">"'INFO', 'DEBUG', 'WARNING', 'ERROR', 'CRITICAL'."</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">_DEFAULT_FORMAT</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">_DEFAULT_FORMAT</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span></div>



<span class="n">setup_logger</span><span class="p">(</span><span class="s2">"INFO"</span><span class="p">)</span>
</pre></div>
        